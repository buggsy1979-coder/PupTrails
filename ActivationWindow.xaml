<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="PupTrailsV3.ActivationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PupTrail License Activation" 
        Height="680" 
        Width="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="SingleBorderWindow"
        Background="#F5F5F5"
        Foreground="#333333"
        Loaded="Window_Loaded">
    <Window.Resources>
        <!-- Force readable text on light background for this window -->
        <SolidColorBrush x:Key="ActivationTextBrush" Color="#222222"/>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource ActivationTextBrush}"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
        </Style>
        <Style TargetType="Label">
            <Setter Property="Foreground" Value="{StaticResource ActivationTextBrush}"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
        </Style>
        <Style TargetType="TextBox">
            <!-- Use default light template and dark text -->
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#1E1E1E"/>
            <Setter Property="BorderBrush" Value="#CCCCCC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CaretBrush" Value="#1E1E1E"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
        </Style>
        <Style TargetType="PasswordBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#1E1E1E"/>
            <Setter Property="BorderBrush" Value="#CCCCCC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="CaretBrush" Value="#1E1E1E"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <!-- Header -->
        <Border Background="#2E7D32" Height="100" VerticalAlignment="Top">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="ðŸ¾ PupTrail License Activation" 
                           FontSize="24" 
                           FontWeight="Bold" 
                           Foreground="White"
                           TextAlignment="Center"/>
                <TextBlock Text="Enter your license information to activate the application" 
                           FontSize="14" 
                           Foreground="#E0E0E0"
                           TextAlignment="Center"
                           Margin="0,10,0,0"/>
            </StackPanel>
        </Border>

        <!-- Content -->
        <ScrollViewer VerticalAlignment="Stretch" Margin="0,100,0,0">
            <Grid Margin="30,30,30,30">
                <StackPanel>
                
                <!-- Organization Name -->
                <StackPanel Margin="0,0,0,20">
                    <TextBlock Text="Organization/Licensee Name" FontWeight="Bold" FontSize="12"/>
                    <TextBox Name="LicenseeNameTextBox" 
                             Height="40" 
                             Padding="12,8"
                             FontSize="14"
                             Background="White"
                             BorderThickness="1"
                             BorderBrush="#CCCCCC"
                             Foreground="#1E1E1E"
                             CaretBrush="#1E1E1E"
                             Margin="0,8,0,0"/>
                </StackPanel>

                <!-- License Key -->
                <StackPanel Margin="0,0,0,20">
                    <TextBlock Text="License Key" FontWeight="Bold" FontSize="12"/>
                    <TextBox Name="LicenseKeyTextBox" 
                             Height="80" 
                             Padding="12,8"
                             FontSize="12"
                             AcceptsReturn="True"
                             TextWrapping="Wrap"
                             VerticalScrollBarVisibility="Auto"
                             Background="White"
                             BorderThickness="1"
                             BorderBrush="#CCCCCC"
                             Foreground="#1E1E1E"
                             CaretBrush="#1E1E1E"
                             Margin="0,8,0,0"/>
                    <TextBlock Text="Paste your complete license key here (you should have received this via email)" 
                               FontSize="11" 
                               Foreground="#999999"
                               TextWrapping="Wrap"
                               Margin="0,8,0,0"/>
                </StackPanel>

                <!-- Machine ID Display -->
                <StackPanel Margin="0,0,0,20">
                    <TextBlock Text="Detected Machine ID" FontWeight="Bold" FontSize="12"/>
                    <TextBox Name="MachineIdTextBox"
                             Height="42"
                             Padding="12,8"
                             FontSize="12"
                             IsReadOnly="True"
                             Background="#F0F0F0"
                             BorderThickness="1"
                             BorderBrush="#CCCCCC"
                             Margin="0,8,0,0"
                             Text="Detecting..."/>
                    <TextBlock Text="This hardware ID is bound to your license once activation succeeds."
                               FontSize="11"
                               Foreground="#666666"
                               TextWrapping="Wrap"
                               Margin="0,6,0,0"/>
                </StackPanel>

                <!-- Status Message -->
                <TextBlock Name="StatusMessage" 
                           Text="" 
                           FontSize="12" 
                           Foreground="#D32F2F"
                           TextWrapping="Wrap"
                           Visibility="Collapsed"
                           Margin="0,0,0,20"/>

                <!-- Buttons -->
                <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                    <Button Name="ActivateButton" 
                            Content="âœ“ Activate License" 
                            Click="ActivateButton_Click"
                            Background="#2E7D32" 
                            Foreground="White" 
                            Padding="15,12" 
                            FontSize="14" 
                            FontWeight="Bold"
                            Cursor="Hand"
                            Width="200"
                            Margin="0,0,10,0"/>
                    
                    <Button Name="ExitButton" 
                            Content="âœ– Exit Application" 
                            Click="ExitButton_Click"
                            Background="#D32F2F" 
                            Foreground="White" 
                            Padding="15,12" 
                            FontSize="14" 
                            FontWeight="Bold"
                            Cursor="Hand"
                            Width="150"/>
                </StackPanel>

                <!-- Info Box -->
                <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="5" Padding="15" Background="#FAFAFA" Margin="0,20,0,0">
                    <StackPanel>
                        <TextBlock Text="â„¹ï¸ About License Activation" FontWeight="Bold" FontSize="12" Margin="0,0,0,10"/>
                        <TextBlock Text="PupTrail requires a valid license to operate. Each activation locks your license to the detected machine ID so only this device can run the app." 
                                   FontSize="11" 
                                   TextWrapping="Wrap"
                                   Foreground="#666666"
                                   Margin="0,0,0,10"/>
                        <TextBlock Text="If you do not have a license key, please contact PupTrail support at support@puptrail.com" 
                                   FontSize="11" 
                                   TextWrapping="Wrap"
                                   Foreground="#666666"/>
                    </StackPanel>
                </Border>
            </StackPanel>
            </Grid>
        </ScrollViewer>
    </Grid>
</Window>
